var fixtures=require("webtorrent-fixtures"),test=require("tape"),WebTorrent=require("../");test("torrent.destroy: destroy and remove torrent",function(r){r.plan(5);var e=new WebTorrent({dht:!1,tracker:!1});e.on("error",function(e){r.fail(e)}),e.on("warning",function(e){r.fail(e)});var t=e.add(fixtures.leaves.parsedTorrent.infoHash);r.equal(e.torrents.length,1),t.on("infoHash",function(){r.equal(t.infoHash,fixtures.leaves.parsedTorrent.infoHash),t.destroy(function(e){r.error(e,"torrent destroyed")}),r.equal(e.torrents.length,0),e.destroy(function(e){r.error(e,"client destroyed")})})});
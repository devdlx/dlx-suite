function verifyImage(e,n,r){e.error(n),e.ok("string"==typeof r.src),e.ok(r.src.indexOf("blob")!==-1),e.equal(r.parentElement.nodeName,"BODY"),e.ok(r.alt,"file.name"),r.remove()}var Buffer=require("safe-buffer").Buffer,test=require("tape"),WebTorrent=require("../../"),img=Buffer.from("R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","base64");img.name="img.png",global&&global.process&&global.process.versions&&global.process.versions.electron||(test("image append w/ query selector",function(e){e.plan(6);var n=new WebTorrent({dht:!1,tracker:!1});n.on("error",function(n){e.fail(n)}),n.on("warning",function(n){e.fail(n)}),n.seed(img,function(r){r.files[0].appendTo("body",function(r,o){verifyImage(e,r,o),n.destroy(function(n){e.error(n,"client destroyed")})})})}),test("image append w/ element",function(e){e.plan(6);var n=new WebTorrent({dht:!1,tracker:!1});n.on("error",function(n){e.fail(n)}),n.on("warning",function(n){e.fail(n)}),n.seed(img,function(r){r.files[0].appendTo(document.body,function(r,o){verifyImage(e,r,o),n.destroy(function(n){e.error(n,"client destroyed")})})})}),test("image render w/ query selector",function(e){e.plan(6);var n=new WebTorrent({dht:!1,tracker:!1});n.on("error",function(n){e.fail(n)}),n.on("warning",function(n){e.fail(n)});var r=document.createElement("img");r.className="tag",document.body.appendChild(r),n.seed(img,function(r){r.files[0].renderTo("img.tag",function(r,o){verifyImage(e,r,o),n.destroy(function(n){e.error(n,"client destroyed")})})})}),test("image render w/ element",function(e){e.plan(6);var n=new WebTorrent({dht:!1,tracker:!1});n.on("error",function(n){e.fail(n)}),n.on("warning",function(n){e.fail(n)});var r=document.createElement("img");document.body.appendChild(r),n.seed(img,function(o){o.files[0].renderTo(r,function(r,o){verifyImage(e,r,o),n.destroy(function(n){e.error(n,"client destroyed")})})})})),test("WebTorrent.WEBRTC_SUPPORT",function(e){e.plan(2);var n=new WebTorrent({dht:!1,tracker:!1});n.on("error",function(n){e.fail(n)}),n.on("warning",function(n){e.fail(n)}),e.equal(WebTorrent.WEBRTC_SUPPORT,!0),n.destroy(function(n){e.error(n,"client destroyed")})});